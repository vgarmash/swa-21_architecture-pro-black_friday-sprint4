# MongoDB Sharding Optimization - –û–Ω–ª–∞–π–Ω-–º–∞–≥–∞–∑–∏–Ω "–ú–æ–±–∏–ª—å–Ω—ã–π –º–∏—Ä"

## –û –ø—Ä–æ–µ–∫—Ç–µ

–ü—Ä–æ–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ MongoDB –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –æ–Ω–ª–∞–π–Ω-–º–∞–≥–∞–∑–∏–Ω–∞ –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤ –¥–ª—è —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–≤. –†–µ—à–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –≤ –ø—Ä–µ–¥–¥–≤–µ—Ä–∏–∏ "—á–µ—Ä–Ω–æ–π –ø—è—Ç–Ω–∏—Ü—ã".

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è –æ–Ω–ª–∞–π–Ω-–º–∞–≥–∞–∑–∏–Ω–∞ "–ú–æ–±–∏–ª—å–Ω—ã–π –º–∏—Ä" —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º MongoDB sharding, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ Redis –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è.

### –≠–≤–æ–ª—é—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ "Documentation as Code" —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Mermaid –¥–∏–∞–≥—Ä–∞–º–º.

üìä **[–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º](diagrams/README.md)**

#### –°—Ö–µ–º–∞ 1: –ë–∞–∑–æ–≤–æ–µ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- 2 —à–∞—Ä–¥–∞ –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- 3 –∫–æ–Ω—Ñ–∏–≥-—Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- mongos —Ä–æ—É—Ç–µ—Ä –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

#### –°—Ö–µ–º–∞ 2: –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ + –†–µ–ø–ª–∏–∫–∞—Ü–∏—è  
- –ö–∞–∂–¥—ã–π —à–∞—Ä–¥ - replica set –∏–∑ 3 –Ω–æ–¥ (1 Primary + 2 Secondary)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–∫–∞–∑–∞—Ö (failover)
- –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

#### –°—Ö–µ–º–∞ 3: –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ + –†–µ–ø–ª–∏–∫–∞—Ü–∏—è + –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ MongoDB
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –°—Ö–µ–º–∞ 4: + API Gateway & Service Discovery
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (3 —à—Ç)
- API Gateway (nginx/Kong) –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏
- Consul –¥–ª—è Service Discovery –∏ health checks
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### –°—Ö–µ–º–∞ 5: + CDN (Content Delivery Network)
- CDN —É–∑–ª—ã –≤ 3 —Ä–µ–≥–∏–æ–Ω–∞—Ö (US, Europe, Asia)
- –ì–ª–æ–±–∞–ª—å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- Static Content Server –∫–∞–∫ origin
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É

–ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–∏–∞–≥—Ä–∞–º–º: `diagrams/*.mmd`  
–°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: `diagrams/output/`

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| **[tasks/TASK1_SUMMARY.md](tasks/TASK1_SUMMARY.md)** | üìñ –ó–∞–¥–∞–Ω–∏–µ 1: –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞<br/>‚Ä¢ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ<br/>‚Ä¢ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º<br/>‚Ä¢ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã |
| **[tasks/TASK1_PLANNING.md](tasks/TASK1_PLANNING.md)** | üìã –ó–∞–¥–∞–Ω–∏–µ 1: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ<br/>‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ—Ö —Å—Ö–µ–º<br/>‚Ä¢ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞<br/>‚Ä¢ –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ |
| **[tasks/TASK2_SUMMARY.md](tasks/TASK2_SUMMARY.md)** | ‚öôÔ∏è –ó–∞–¥–∞–Ω–∏–µ 2: –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞<br/>‚Ä¢ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ<br/>‚Ä¢ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å<br/>‚Ä¢ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º |
| **[tasks/TASK2_SHARDING_SETUP.md](tasks/TASK2_SHARDING_SETUP.md)** | üîß –ó–∞–¥–∞–Ω–∏–µ 2: –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞<br/>‚Ä¢ –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (8 —à–∞–≥–æ–≤)<br/>‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã<br/>‚Ä¢ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ |
| **[tasks/TASK3_SUMMARY.md](tasks/TASK3_SUMMARY.md)** | üîÑ –ó–∞–¥–∞–Ω–∏–µ 3: –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞<br/>‚Ä¢ –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –¥–ª—è —à–∞—Ä–¥–æ–≤<br/>‚Ä¢ 11 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (3 —Ä–µ–ø–ª–∏–∫–∏ –Ω–∞ —à–∞—Ä–¥)<br/>‚Ä¢ Automatic failover |
| **[tasks/TASK3_REPLICATION_SETUP.md](tasks/TASK3_REPLICATION_SETUP.md)** | üîß –ó–∞–¥–∞–Ω–∏–µ 3: –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞<br/>‚Ä¢ –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ replica sets<br/>‚Ä¢ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ failover<br/>‚Ä¢ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ |
| **[tasks/TASK4_SUMMARY.md](tasks/TASK4_SUMMARY.md)** | üöÄ –ó–∞–¥–∞–Ω–∏–µ 4: –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞<br/>‚Ä¢ Redis –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ<br/>‚Ä¢ 12 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (+ Redis)<br/>‚Ä¢ –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ ~20 —Ä–∞–∑ |
| **[tasks/TASK4_CACHING_SETUP.md](tasks/TASK4_CACHING_SETUP.md)** | üîß –ó–∞–¥–∞–Ω–∏–µ 4: –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞<br/>‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis<br/>‚Ä¢ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏<br/>‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–µ—à–∞ |
| **[tasks/TASK5_SUMMARY.md](tasks/TASK5_SUMMARY.md)** | üåê –ó–∞–¥–∞–Ω–∏–µ 5: –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞<br/>‚Ä¢ API Gateway + Consul (—Å—Ö–µ–º–∞)<br/>‚Ä¢ –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ<br/>‚Ä¢ Service Discovery |
| **[tasks/TASK6_SUMMARY.md](tasks/TASK6_SUMMARY.md)** | üåç –ó–∞–¥–∞–Ω–∏–µ 6: –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞<br/>‚Ä¢ CDN (—Å—Ö–µ–º–∞)<br/>‚Ä¢ –ì–ª–æ–±–∞–ª—å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞<br/>‚Ä¢ 3 —Ä–µ–≥–∏–æ–Ω–∞ (US, EU, Asia) |
| **[tasks/TASK7_SUMMARY.md](tasks/TASK7_SUMMARY.md)** | üìê –ó–∞–¥–∞–Ω–∏–µ 7: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π<br/>‚Ä¢ –°—Ö–µ–º—ã products, orders, carts<br/>‚Ä¢ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è<br/>‚Ä¢ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ MongoDB |
| **[tasks/TASK8_SUMMARY.md](tasks/TASK8_SUMMARY.md)** | üî• –ó–∞–¥–∞–Ω–∏–µ 8: "–ì–æ—Ä—è—á–∏–µ" —à–∞—Ä–¥—ã<br/>‚Ä¢ –ú–µ—Ç—Ä–∏–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞<br/>‚Ä¢ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –¥–∏—Å–±–∞–ª–∞–Ω—Å–∞<br/>‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ |
| **[diagrams/ARCHITECTURE.md](diagrams/ARCHITECTURE.md)** | üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º (5 —à—Ç)<br/>‚Ä¢ Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º<br/>‚Ä¢ –õ–µ–≥–µ–Ω–¥—ã –∏ –ø–æ—è—Å–Ω–µ–Ω–∏—è |
| **[diagrams/README.md](diagrams/README.md)** | üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è<br/>‚Ä¢ –õ–æ–∫–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º<br/>‚Ä¢ GitHub Actions workflow |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
mongodb-sharding-optimization/
‚îú‚îÄ‚îÄ README.md                    # üëà –í—ã –∑–¥–µ—Å—å - –≥–ª–∞–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ compose.yaml                 # üê≥ Docker Compose (12 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)
‚îú‚îÄ‚îÄ puppeteer-config.json        # ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∏–∞–≥—Ä–∞–º–º
‚îÇ
‚îú‚îÄ‚îÄ tasks/                       # üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∑–∞–¥–∞–Ω–∏—è–º
‚îÇ   ‚îú‚îÄ‚îÄ TASK1_SUMMARY.md         # ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 1: –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ TASK1_PLANNING.md        # üìã –ó–∞–¥–∞–Ω–∏–µ 1: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ TASK2_SUMMARY.md         # ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 2: –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ TASK2_SHARDING_SETUP.md  # üîß –ó–∞–¥–∞–Ω–∏–µ 2: –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ TASK3_SUMMARY.md         # ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 3: –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ TASK3_REPLICATION_SETUP.md  # üîß –ó–∞–¥–∞–Ω–∏–µ 3: –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ TASK4_SUMMARY.md         # ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 4: –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ TASK4_CACHING_SETUP.md   # üîß –ó–∞–¥–∞–Ω–∏–µ 4: –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ TASK5_SUMMARY.md         # ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 5: –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ (—Å—Ö–µ–º–∞)
‚îÇ   ‚îú‚îÄ‚îÄ TASK6_SUMMARY.md         # ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 6: –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ (—Å—Ö–µ–º–∞)
‚îÇ   ‚îú‚îÄ‚îÄ TASK7_SUMMARY.md         # ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 7: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ TASK8_SUMMARY.md         # ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 8: "–ì–æ—Ä—è—á–∏–µ" —à–∞—Ä–¥—ã
‚îÇ
‚îú‚îÄ‚îÄ api_app/                     # üöÄ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ app.py
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îÇ
‚îú‚îÄ‚îÄ diagrams/                    # üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md          # –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å—Ö–µ–º (5 —à—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ README.md                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –¥–∏–∞–≥—Ä–∞–º–º–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ 01-sharding.mmd          # –°—Ö–µ–º–∞ 1: –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ 02-sharding-replication.mmd  # –°—Ö–µ–º–∞ 2: + –†–µ–ø–ª–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ 03-sharding-replication-caching.mmd  # –°—Ö–µ–º–∞ 3: + –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ 04-sharding-replication-caching-gateway.mmd  # –°—Ö–µ–º–∞ 4: + API Gateway
‚îÇ   ‚îú‚îÄ‚îÄ 05-sharding-replication-caching-gateway-cdn.mmd  # –°—Ö–µ–º–∞ 5: + CDN
‚îÇ   ‚îî‚îÄ‚îÄ output/                  # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ PNG/SVG
‚îÇ
‚îú‚îÄ‚îÄ scripts/                     # üîß –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ init-replication.sh      # üÜï –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —à–∞—Ä–¥–æ–≤ + —Ä–µ–ø–ª–∏–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
‚îÇ   ‚îú‚îÄ‚îÄ init-sharding.sh         # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ —à–∞—Ä–¥–æ–≤ (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)
‚îÇ   ‚îú‚îÄ‚îÄ mongo-init.sh            # ‚ö†Ô∏è –£—Å—Ç–∞—Ä–µ–ª (–¥–ª—è —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏)
‚îÇ   ‚îî‚îÄ‚îÄ generate-diagrams.sh     # –õ–æ–∫–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º
‚îÇ
‚îî‚îÄ‚îÄ .github/workflows/           # ü§ñ GitHub Actions
    ‚îî‚îÄ‚îÄ generate-diagrams.yml    # CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
```

## üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** –ó–∞–¥–∞–Ω–∏—è 1-8 ‚úÖ

üìã **[–ó–∞–¥–∞–Ω–∏–µ 1](tasks/TASK1_SUMMARY.md)** | **[–ó–∞–¥–∞–Ω–∏–µ 2](tasks/TASK2_SUMMARY.md)** | **[–ó–∞–¥–∞–Ω–∏–µ 3](tasks/TASK3_SUMMARY.md)** | **[–ó–∞–¥–∞–Ω–∏–µ 4](tasks/TASK4_SUMMARY.md)** | **[–ó–∞–¥–∞–Ω–∏–µ 5](tasks/TASK5_SUMMARY.md)** | **[–ó–∞–¥–∞–Ω–∏–µ 6](tasks/TASK6_SUMMARY.md)** | **[–ó–∞–¥–∞–Ω–∏–µ 7](tasks/TASK7_SUMMARY.md)** | **[–ó–∞–¥–∞–Ω–∏–µ 8](tasks/TASK8_SUMMARY.md)**

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (12 —à—Ç: 3 config + 6 shards + mongos + redis + api)
docker compose up -d

# 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–ø–æ–¥–æ–∂–¥–∏—Ç–µ 10-15 —Å–µ–∫)
./scripts/init-replication.sh

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
curl http://127.0.0.1:8080 | jq
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
- `"mongo_topology_type": "Sharded"` ‚úÖ
- `"cache_enabled": true` ‚úÖ (Redis)
- 2 —à–∞—Ä–¥–∞ —Å 3 —Ä–µ–ø–ª–∏–∫–∞–º–∏ –∫–∞–∂–¥—ã–π ‚úÖ

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å (–ø–æ–¥—Ä–æ–±–Ω–æ)

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```shell
docker compose up -d
```

–ë—É–¥—É—Ç –∑–∞–ø—É—â–µ–Ω—ã **12 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**:
- 3 Config Servers (configSrv1, configSrv2, configSrv3)
- 6 Shard Replicas (shard1-1, shard1-2, shard1-3, shard2-1, shard2-2, shard2-3)
- 1 Mongos Router
- 1 Redis Cache
- 1 API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (pymongo-api)

### –®–∞–≥ 2: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏

```shell
./scripts/init-replication.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç replica sets –¥–ª—è config servers (3 –Ω–æ–¥—ã)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç replica sets –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞—Ä–¥–∞ (–ø–æ 3 –Ω–æ–¥—ã)
- –î–æ–±–∞–≤–∏—Ç —à–∞—Ä–¥—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä
- –í–∫–ª—é—á–∏—Ç —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ë–î `somedb`
- –°–æ–∑–¥–∞—Å—Ç –∏ —à–∞—Ä–¥–∏—Ä—É–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é `helloDoc`
- –ó–∞–≥—Ä—É–∑–∏—Ç 1000 —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** 
- [tasks/TASK2_SHARDING_SETUP.md](tasks/TASK2_SHARDING_SETUP.md) - –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [tasks/TASK3_REPLICATION_SETUP.md](tasks/TASK3_REPLICATION_SETUP.md) - –†–µ–ø–ª–∏–∫–∞—Ü–∏—è
- [tasks/TASK4_CACHING_SETUP.md](tasks/TASK4_CACHING_SETUP.md) - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### –ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ http://127.0.0.1:8080

### –ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

–£–∑–Ω–∞—Ç—å –±–µ–ª—ã–π ip –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã

```shell
curl --silent http://ifconfig.me
```

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ http://<ip –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã>:8080

## –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

–°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, swagger http://<ip –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã>:8080/docs

---

## üîó –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏

### –ó–∞–¥–∞–Ω–∏—è
- üìñ [–ó–∞–¥–∞–Ω–∏–µ 1: –°–≤–æ–¥–∫–∞](tasks/TASK1_SUMMARY.md) - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã
- ‚öôÔ∏è [–ó–∞–¥–∞–Ω–∏–µ 2: –°–≤–æ–¥–∫–∞](tasks/TASK2_SUMMARY.md) - –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (2 —à–∞—Ä–¥–∞)
- üîÑ [–ó–∞–¥–∞–Ω–∏–µ 3: –°–≤–æ–¥–∫–∞](tasks/TASK3_SUMMARY.md) - –†–µ–ø–ª–∏–∫–∞—Ü–∏—è (3 —Ä–µ–ø–ª–∏–∫–∏ –Ω–∞ —à–∞—Ä–¥)
- üöÄ [–ó–∞–¥–∞–Ω–∏–µ 4: –°–≤–æ–¥–∫–∞](tasks/TASK4_SUMMARY.md) - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
- üåê [–ó–∞–¥–∞–Ω–∏–µ 5: –°–≤–æ–¥–∫–∞](tasks/TASK5_SUMMARY.md) - API Gateway + Consul (—Å—Ö–µ–º–∞)
- üåç [–ó–∞–¥–∞–Ω–∏–µ 6: –°–≤–æ–¥–∫–∞](tasks/TASK6_SUMMARY.md) - CDN (—Å—Ö–µ–º–∞)
- üìê [–ó–∞–¥–∞–Ω–∏–µ 7: –°–≤–æ–¥–∫–∞](tasks/TASK7_SUMMARY.md) - –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π
- üî• [–ó–∞–¥–∞–Ω–∏–µ 8: –°–≤–æ–¥–∫–∞](tasks/TASK8_SUMMARY.md) - "–ì–æ—Ä—è—á–∏–µ" —à–∞—Ä–¥—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üìã [–ó–∞–¥–∞–Ω–∏–µ 1: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ](tasks/TASK1_PLANNING.md)
- üîß [–ó–∞–¥–∞–Ω–∏–µ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è](tasks/TASK2_SHARDING_SETUP.md)
- üîß [–ó–∞–¥–∞–Ω–∏–µ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏](tasks/TASK3_REPLICATION_SETUP.md)
- üîß [–ó–∞–¥–∞–Ω–∏–µ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è](tasks/TASK4_CACHING_SETUP.md)
- üìä [–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º](diagrams/ARCHITECTURE.md)
- üõ†Ô∏è [–†–∞–±–æ—Ç–∞ —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏](diagrams/README.md)

### –ö–æ–¥ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- üöÄ [–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ API](api_app/app.py)
- üê≥ [Docker Compose](compose.yaml)
- üìú [–°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —à–∞—Ä–¥–æ–≤](scripts/init-sharding.sh)
- üìú [–°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–ø–ª–∏–∫](scripts/init-replication.sh)