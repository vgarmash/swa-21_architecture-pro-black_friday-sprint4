# Архитектурные варианты

- Вариант A: Шардирование (2 шарда)
- Вариант B: Шардирование + Репликация (по 3 реплики на шард)
- Вариант C: Шардирование + Репликация + Кеш Redis

См. соответствующие диаграммы в этой директории.

## Вариант A — Шардирование
Компоненты: `pymongo-api`, `mongos`, `configSrv`, `shard1`, `shard2`.
Ключевое: включить `enableSharding('somedb')` и `shardCollection('somedb.helloDoc', { _id: 'hashed' })`.

## Вариант B — Репликация
На каждом шарде — replica set из трёх нод. Записи на Primary, возможно чтение с Secondary (где допустимо).

## Вариант C — Кеширование
Добавляется `redis`, `REDIS_URL`, кеш эндпоинта `/<collection_name>/users`. 