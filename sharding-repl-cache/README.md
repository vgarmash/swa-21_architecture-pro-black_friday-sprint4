# sharding-repl-cache

## Как запустить

```shell
docker compose up -d --build
```

Инициализация репликации и шардирования

```shell
./scripts/sharding-repl-cache-init.sh
```

## Как проверить

### Если вы запускаете проект на локальной машине

Откройте в браузере http://localhost:8080

### Если вы запускаете проект на предоставленной виртуальной машине

Узнать белый ip виртуальной машины

```shell
curl --silent http://ifconfig.me
```

Откройте в браузере http://<ip виртуальной машины>:8080

## Доступные эндпоинты

Список доступных эндпоинтов, swagger http://<ip виртуальной машины>:8080/docs

## Проверка кеширования Redis

Выполните запрос и замерьте время его выполнения.

```shell
time curl http://localhost:8080/helloDoc/users
```

Вывод команды time покажет, что выполнение запроса происходило более 1 секунды ('real 0m1...s'), т.к. данные читались напрямую из MongoDB.

После этого выполните тот же запрос повторно.

```bash
time curl http://localhost:8080/helloDoc/users
```

Теперь запрос должен выполниться гораздо быстрее (<100 миллисекунд), т.к. результат будет взят из кеша Redis. Время выполнения ('real') будет порядка '0m0.0...s'.
